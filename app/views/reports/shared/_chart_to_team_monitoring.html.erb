<% sprint = Sprint.find(params[:sprint]) %>
<% projects = Project.where(id: sprint.projects.ids).order(:description) %>

<% projects.each do |p| %>
  <div class="chart">
    <h1 style="color: black;font-size: 20pt;font-weight: bold;text-align: center;margin-top: 0;">
      <%= p.description %>
    </h1>
    <div id="chart_<%= p.id %>"></div>

    <p style="font-size: 8pt;text-align: justify;">
      * Integrantes da equipe:

      <% last_u = p.team.users
                 .joins(:user_profile).order("user_profiles.name")
                 .last %>

      <% p.team.users.joins(:user_profile)
         .order("user_profiles.name").each do |u| %>

        <% unless u == last_u %>
          <%= u.user_profile.name %>,
        <% else %>
          <%= u.user_profile.name %>.
        <% end %>

      <% end %>
    </p>

  </div>
<% end %>